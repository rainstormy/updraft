import Jn from"node:process";import{readFile as es,writeFile as ts}from"node:fs/promises";import Nt from"os";import ue from"path";import rn from"util";import qe from"stream";import rs from"events";import It from"fs";function Ft(t){return t!=null}function ns(t){return t!==!1}function Bt(t,e,r=`${e}s`){return t===1?e:r}const ss=/\s+/;function is(t){return t.split(ss).map(e=>e.trim()).filter(e=>e.length>0)}var as={};function os(){const t=us("check-sequential-release"),e=ot("files"),r=ot("prerelease-files"),n=ot("release-files"),s=jt("release-version");return[t&&["--check-sequential-release"],e.length>0&&["--files",...e],r.length>0&&["--prerelease-files",...r],n.length>0&&["--release-files",...n],s!==null&&["--release-version",s]].filter(ns).flat()}function jt(t){const e=as[`INPUT_${t.toUpperCase()}`]??"";return e!==""?e:null}function ot(t){const e=jt(t);return e!==null?is(e):[]}function us(t){var r;const e=(r=jt(t))==null?void 0:r.toLowerCase();return e==="true"||e==="yes"||e==="y"||e==="on"}function cs(t){console.log(t)}function Et(t){console.warn(`WARNING: ${t}`)}function At(t){console.error(`ERROR: ${t}`)}async function ut(t,e){return At(`${t}${e}`),2}function ve(t){if(!(t instanceof Error))throw t}var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W={},I={},Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.splitWhen=Ee.flatten=void 0;function ps(t){return t.reduce((e,r)=>[].concat(e,r),[])}Ee.flatten=ps;function hs(t,e){const r=[[]];let n=0;for(const s of t)e(s)?(n++,r[n]=[]):r[n].push(s);return r}Ee.splitWhen=hs;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.isEnoentCodeError=void 0;function ds(t){return t.code==="ENOENT"}Ve.isEnoentCodeError=ds;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createDirentFromStats=void 0;let _s=class{constructor(e,r){this.name=e,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function gs(t,e){return new _s(t,e)}Ke.createDirentFromStats=gs;var j={};Object.defineProperty(j,"__esModule",{value:!0});j.convertPosixPathToPattern=j.convertWindowsPathToPattern=j.convertPathToPattern=j.escapePosixPath=j.escapeWindowsPath=j.escape=j.removeLeadingDotSegment=j.makeAbsolute=j.unixify=void 0;const ys=Nt,ms=ue,nn=ys.platform()==="win32",Ss=2,vs=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\()|\\(?![!()*+?@[\]{|}]))/g,Es=/(\\?)([()[\]{}]|^!|[!+@](?=\())/g,As=/^\\\\([.?])/,Rs=/\\(?![!()+@[\]{}])/g;function bs(t){return t.replace(/\\/g,"/")}j.unixify=bs;function $s(t,e){return ms.resolve(t,e)}j.makeAbsolute=$s;function Ps(t){if(t.charAt(0)==="."){const e=t.charAt(1);if(e==="/"||e==="\\")return t.slice(Ss)}return t}j.removeLeadingDotSegment=Ps;j.escape=nn?Ut:Gt;function Ut(t){return t.replace(Es,"\\$2")}j.escapeWindowsPath=Ut;function Gt(t){return t.replace(vs,"\\$2")}j.escapePosixPath=Gt;j.convertPathToPattern=nn?sn:an;function sn(t){return Ut(t).replace(As,"//$1").replace(Rs,"/")}j.convertWindowsPathToPattern=sn;function an(t){return Gt(t)}j.convertPosixPathToPattern=an;var E={};/*!
 * is-extglob <https://github.com/jonschlinkert/is-extglob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ws=function(e){if(typeof e!="string"||e==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(r[2])return!0;e=e.slice(r.index+r[0].length)}return!1};/*!
 * is-glob <https://github.com/jonschlinkert/is-glob>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Cs=ws,on={"{":"}","(":")","[":"]"},Ts=function(t){if(t[0]==="!")return!0;for(var e=0,r=-2,n=-2,s=-2,i=-2,a=-2;e<t.length;){if(t[e]==="*"||t[e+1]==="?"&&/[\].+)]/.test(t[e])||n!==-1&&t[e]==="["&&t[e+1]!=="]"&&(n<e&&(n=t.indexOf("]",e)),n>e&&(a===-1||a>n||(a=t.indexOf("\\",e),a===-1||a>n)))||s!==-1&&t[e]==="{"&&t[e+1]!=="}"&&(s=t.indexOf("}",e),s>e&&(a=t.indexOf("\\",e),a===-1||a>s))||i!==-1&&t[e]==="("&&t[e+1]==="?"&&/[:!=]/.test(t[e+2])&&t[e+3]!==")"&&(i=t.indexOf(")",e),i>e&&(a=t.indexOf("\\",e),a===-1||a>i))||r!==-1&&t[e]==="("&&t[e+1]!=="|"&&(r<e&&(r=t.indexOf("|",e)),r!==-1&&t[r+1]!==")"&&(i=t.indexOf(")",r),i>r&&(a=t.indexOf("\\",r),a===-1||a>i))))return!0;if(t[e]==="\\"){var o=t[e+1];e+=2;var u=on[o];if(u){var f=t.indexOf(u,e);f!==-1&&(e=f+1)}if(t[e]==="!")return!0}else e++}return!1},Os=function(t){if(t[0]==="!")return!0;for(var e=0;e<t.length;){if(/[*?{}()[\]]/.test(t[e]))return!0;if(t[e]==="\\"){var r=t[e+1];e+=2;var n=on[r];if(n){var s=t.indexOf(n,e);s!==-1&&(e=s+1)}if(t[e]==="!")return!0}else e++}return!1},xs=function(e,r){if(typeof e!="string"||e==="")return!1;if(Cs(e))return!0;var n=Ts;return r&&r.strict===!1&&(n=Os),n(e)},Ls=xs,ks=ue.posix.dirname,Hs=Nt.platform()==="win32",ct="/",Ms=/\\/g,Ds=/[\{\[].*[\}\]]$/,Ns=/(^|[^\\])([\{\[]|\([^\)]+$)/,Is=/\\([\!\*\?\|\[\]\(\)\{\}])/g,Fs=function(e,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&Hs&&e.indexOf(ct)<0&&(e=e.replace(Ms,ct)),Ds.test(e)&&(e+=ct),e+="a";do e=ks(e);while(Ls(e)||Ns.test(e));return e.replace(Is,"$1")},Qe={};(function(t){t.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1,t.find=(e,r)=>e.nodes.find(n=>n.type===r),t.exceedsLimit=(e,r,n=1,s)=>s===!1||!t.isInteger(e)||!t.isInteger(r)?!1:(Number(r)-Number(e))/Number(n)>=s,t.escapeNode=(e,r=0,n)=>{let s=e.nodes[r];s&&(n&&s.type===n||s.type==="open"||s.type==="close")&&s.escaped!==!0&&(s.value="\\"+s.value,s.escaped=!0)},t.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0),t.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1,t.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0,t.reduce=e=>e.reduce((r,n)=>(n.type==="text"&&r.push(n.value),n.type==="range"&&(n.type="text"),r),[]),t.flatten=(...e)=>{const r=[],n=s=>{for(let i=0;i<s.length;i++){let a=s[i];Array.isArray(a)?n(a):a!==void 0&&r.push(a)}return r};return n(e),r}})(Qe);const Sr=Qe;var Wt=(t,e={})=>{let r=(n,s={})=>{let i=e.escapeInvalid&&Sr.isInvalidBrace(s),a=n.invalid===!0&&e.escapeInvalid===!0,o="";if(n.value)return(i||a)&&Sr.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let u of n.nodes)o+=r(u);return o};return r(t)};/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var Bs=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1};/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const vr=Bs,ye=(t,e,r)=>{if(vr(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(vr(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let s=String(n.relaxZeros),i=String(n.shorthand),a=String(n.capture),o=String(n.wrap),u=t+":"+e+"="+s+i+a+o;if(ye.cache.hasOwnProperty(u))return ye.cache[u].result;let f=Math.min(t,e),c=Math.max(t,e);if(Math.abs(f-c)===1){let y=t+"|"+e;return n.capture?`(${y})`:n.wrap===!1?y:`(?:${y})`}let _=Pr(t)||Pr(e),l={min:t,max:e,a:f,b:c},v=[],g=[];if(_&&(l.isPadded=_,l.maxLen=String(l.max).length),f<0){let y=c<0?Math.abs(c):1;g=Er(y,Math.abs(f),l,n),f=l.a=0}return c>=0&&(v=Er(f,c,l,n)),l.negatives=g,l.positives=v,l.result=js(g,v),n.capture===!0?l.result=`(${l.result})`:n.wrap!==!1&&v.length+g.length>1&&(l.result=`(?:${l.result})`),ye.cache[u]=l,l.result};function js(t,e,r){let n=lt(t,e,"-",!1)||[],s=lt(e,t,"",!1)||[],i=lt(t,e,"-?",!0)||[];return n.concat(i).concat(s).join("|")}function Us(t,e){let r=1,n=1,s=Rr(t,r),i=new Set([e]);for(;t<=s&&s<=e;)i.add(s),r+=1,s=Rr(t,r);for(s=br(e+1,n)-1;t<s&&s<=e;)i.add(s),n+=1,s=br(e+1,n)-1;return i=[...i],i.sort(qs),i}function Gs(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let n=Ws(t,e),s=n.length,i="",a=0;for(let o=0;o<s;o++){let[u,f]=n[o];u===f?i+=u:u!=="0"||f!=="9"?i+=Vs(u,f):a++}return a&&(i+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:i,count:[a],digits:s}}function Er(t,e,r,n){let s=Us(t,e),i=[],a=t,o;for(let u=0;u<s.length;u++){let f=s[u],c=Gs(String(a),String(f),n),_="";if(!r.isPadded&&o&&o.pattern===c.pattern){o.count.length>1&&o.count.pop(),o.count.push(c.count[0]),o.string=o.pattern+$r(o.count),a=f+1;continue}r.isPadded&&(_=Ks(f,r,n)),c.string=_+c.pattern+$r(c.count),i.push(c),a=f+1,o=c}return i}function lt(t,e,r,n,s){let i=[];for(let a of t){let{string:o}=a;!n&&!Ar(e,"string",o)&&i.push(r+o),n&&Ar(e,"string",o)&&i.push(r+o)}return i}function Ws(t,e){let r=[];for(let n=0;n<t.length;n++)r.push([t[n],e[n]]);return r}function qs(t,e){return t>e?1:e>t?-1:0}function Ar(t,e,r){return t.some(n=>n[e]===r)}function Rr(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function br(t,e){return t-t%Math.pow(10,e)}function $r(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function Vs(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function Pr(t){return/^-?(0+)\d/.test(t)}function Ks(t,e,r){if(!e.isPadded)return t;let n=Math.abs(e.maxLen-String(t).length),s=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return s?"0?":"0";case 2:return s?"0{0,2}":"00";default:return s?`0{0,${n}}`:`0{${n}}`}}ye.cache={};ye.clearCache=()=>ye.cache={};var Qs=ye;/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const Ys=rn,un=Qs,wr=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),Xs=t=>e=>t===!0?Number(e):String(e),ft=t=>typeof t=="number"||typeof t=="string"&&t!=="",$e=t=>Number.isInteger(+t),pt=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},Zs=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,zs=(t,e,r)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return r===!1?String(t):t},Cr=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},Js=(t,e)=>{t.negatives.sort((a,o)=>a<o?-1:a>o?1:0),t.positives.sort((a,o)=>a<o?-1:a>o?1:0);let r=e.capture?"":"?:",n="",s="",i;return t.positives.length&&(n=t.positives.join("|")),t.negatives.length&&(s=`-(${r}${t.negatives.join("|")})`),n&&s?i=`${n}|${s}`:i=n||s,e.wrap?`(${r}${i})`:i},cn=(t,e,r,n)=>{if(r)return un(t,e,{wrap:!1,...n});let s=String.fromCharCode(t);if(t===e)return s;let i=String.fromCharCode(e);return`[${s}-${i}]`},ln=(t,e,r)=>{if(Array.isArray(t)){let n=r.wrap===!0,s=r.capture?"":"?:";return n?`(${s}${t.join("|")})`:t.join("|")}return un(t,e,r)},fn=(...t)=>new RangeError("Invalid range arguments: "+Ys.inspect(...t)),pn=(t,e,r)=>{if(r.strictRanges===!0)throw fn([t,e]);return[]},ei=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},ti=(t,e,r=1,n={})=>{let s=Number(t),i=Number(e);if(!Number.isInteger(s)||!Number.isInteger(i)){if(n.strictRanges===!0)throw fn([t,e]);return[]}s===0&&(s=0),i===0&&(i=0);let a=s>i,o=String(t),u=String(e),f=String(r);r=Math.max(Math.abs(r),1);let c=pt(o)||pt(u)||pt(f),_=c?Math.max(o.length,u.length,f.length):0,l=c===!1&&Zs(t,e,n)===!1,v=n.transform||Xs(l);if(n.toRegex&&r===1)return cn(Cr(t,_),Cr(e,_),!0,n);let g={negatives:[],positives:[]},y=F=>g[F<0?"negatives":"positives"].push(Math.abs(F)),P=[],C=0;for(;a?s>=i:s<=i;)n.toRegex===!0&&r>1?y(s):P.push(zs(v(s,C),_,l)),s=a?s-r:s+r,C++;return n.toRegex===!0?r>1?Js(g,n):ln(P,null,{wrap:!1,...n}):P},ri=(t,e,r=1,n={})=>{if(!$e(t)&&t.length>1||!$e(e)&&e.length>1)return pn(t,e,n);let s=n.transform||(l=>String.fromCharCode(l)),i=`${t}`.charCodeAt(0),a=`${e}`.charCodeAt(0),o=i>a,u=Math.min(i,a),f=Math.max(i,a);if(n.toRegex&&r===1)return cn(u,f,!1,n);let c=[],_=0;for(;o?i>=a:i<=a;)c.push(s(i,_)),i=o?i-r:i+r,_++;return n.toRegex===!0?ln(c,null,{wrap:!1,options:n}):c},Fe=(t,e,r,n={})=>{if(e==null&&ft(t))return[t];if(!ft(t)||!ft(e))return pn(t,e,n);if(typeof r=="function")return Fe(t,e,1,{transform:r});if(wr(r))return Fe(t,e,0,r);let s={...n};return s.capture===!0&&(s.wrap=!0),r=r||s.step||1,$e(r)?$e(t)&&$e(e)?ti(t,e,r,s):ri(t,e,Math.max(Math.abs(r),1),s):r!=null&&!wr(r)?ei(r,s):Fe(t,e,1,r)};var hn=Fe;const ni=hn,Tr=Qe,si=(t,e={})=>{let r=(n,s={})=>{let i=Tr.isInvalidBrace(s),a=n.invalid===!0&&e.escapeInvalid===!0,o=i===!0||a===!0,u=e.escapeInvalid===!0?"\\":"",f="";if(n.isOpen===!0||n.isClose===!0)return u+n.value;if(n.type==="open")return o?u+n.value:"(";if(n.type==="close")return o?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":o?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let c=Tr.reduce(n.nodes),_=ni(...c,{...e,wrap:!1,toRegex:!0});if(_.length!==0)return c.length>1&&_.length>1?`(${_})`:_}if(n.nodes)for(let c of n.nodes)f+=r(c,n);return f};return r(t)};var ii=si;const ai=hn,Or=Wt,Se=Qe,ge=(t="",e="",r=!1)=>{let n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?Se.flatten(e).map(s=>`{${s}}`):e;for(let s of t)if(Array.isArray(s))for(let i of s)n.push(ge(i,e,r));else for(let i of e)r===!0&&typeof i=="string"&&(i=`{${i}}`),n.push(Array.isArray(i)?ge(s,i,r):s+i);return Se.flatten(n)},oi=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(s,i={})=>{s.queue=[];let a=i,o=i.queue;for(;a.type!=="brace"&&a.type!=="root"&&a.parent;)a=a.parent,o=a.queue;if(s.invalid||s.dollar){o.push(ge(o.pop(),Or(s,e)));return}if(s.type==="brace"&&s.invalid!==!0&&s.nodes.length===2){o.push(ge(o.pop(),["{}"]));return}if(s.nodes&&s.ranges>0){let _=Se.reduce(s.nodes);if(Se.exceedsLimit(..._,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let l=ai(..._,e);l.length===0&&(l=Or(s,e)),o.push(ge(o.pop(),l)),s.nodes=[];return}let u=Se.encloseBrace(s),f=s.queue,c=s;for(;c.type!=="brace"&&c.type!=="root"&&c.parent;)c=c.parent,f=c.queue;for(let _=0;_<s.nodes.length;_++){let l=s.nodes[_];if(l.type==="comma"&&s.type==="brace"){_===1&&f.push(""),f.push("");continue}if(l.type==="close"){o.push(ge(o.pop(),f,u));continue}if(l.value&&l.type!=="open"){f.push(ge(f.pop(),l.value));continue}l.nodes&&n(l,s)}return f};return Se.flatten(n(t))};var ui=oi,ci={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"Â ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const li=Wt,{MAX_LENGTH:xr,CHAR_BACKSLASH:ht,CHAR_BACKTICK:fi,CHAR_COMMA:pi,CHAR_DOT:hi,CHAR_LEFT_PARENTHESES:di,CHAR_RIGHT_PARENTHESES:_i,CHAR_LEFT_CURLY_BRACE:gi,CHAR_RIGHT_CURLY_BRACE:yi,CHAR_LEFT_SQUARE_BRACKET:Lr,CHAR_RIGHT_SQUARE_BRACKET:kr,CHAR_DOUBLE_QUOTE:mi,CHAR_SINGLE_QUOTE:Si,CHAR_NO_BREAK_SPACE:vi,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Ei}=ci,Ai=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},n=typeof r.maxLength=="number"?Math.min(xr,r.maxLength):xr;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);let s={type:"root",input:t,nodes:[]},i=[s],a=s,o=s,u=0,f=t.length,c=0,_=0,l;const v=()=>t[c++],g=y=>{if(y.type==="text"&&o.type==="dot"&&(o.type="text"),o&&o.type==="text"&&y.type==="text"){o.value+=y.value;return}return a.nodes.push(y),y.parent=a,y.prev=o,o=y,y};for(g({type:"bos"});c<f;)if(a=i[i.length-1],l=v(),!(l===Ei||l===vi)){if(l===ht){g({type:"text",value:(e.keepEscaping?l:"")+v()});continue}if(l===kr){g({type:"text",value:"\\"+l});continue}if(l===Lr){u++;let y;for(;c<f&&(y=v());){if(l+=y,y===Lr){u++;continue}if(y===ht){l+=v();continue}if(y===kr&&(u--,u===0))break}g({type:"text",value:l});continue}if(l===di){a=g({type:"paren",nodes:[]}),i.push(a),g({type:"text",value:l});continue}if(l===_i){if(a.type!=="paren"){g({type:"text",value:l});continue}a=i.pop(),g({type:"text",value:l}),a=i[i.length-1];continue}if(l===mi||l===Si||l===fi){let y=l,P;for(e.keepQuotes!==!0&&(l="");c<f&&(P=v());){if(P===ht){l+=P+v();continue}if(P===y){e.keepQuotes===!0&&(l+=P);break}l+=P}g({type:"text",value:l});continue}if(l===gi){_++;let P={type:"brace",open:!0,close:!1,dollar:o.value&&o.value.slice(-1)==="$"||a.dollar===!0,depth:_,commas:0,ranges:0,nodes:[]};a=g(P),i.push(a),g({type:"open",value:l});continue}if(l===yi){if(a.type!=="brace"){g({type:"text",value:l});continue}let y="close";a=i.pop(),a.close=!0,g({type:y,value:l}),_--,a=i[i.length-1];continue}if(l===pi&&_>0){if(a.ranges>0){a.ranges=0;let y=a.nodes.shift();a.nodes=[y,{type:"text",value:li(a)}]}g({type:"comma",value:l}),a.commas++;continue}if(l===hi&&_>0&&a.commas===0){let y=a.nodes;if(_===0||y.length===0){g({type:"text",value:l});continue}if(o.type==="dot"){if(a.range=[],o.value+=l,o.type="range",a.nodes.length!==3&&a.nodes.length!==5){a.invalid=!0,a.ranges=0,o.type="text";continue}a.ranges++,a.args=[];continue}if(o.type==="range"){y.pop();let P=y[y.length-1];P.value+=o.value+l,o=P,a.ranges--;continue}g({type:"dot",value:l});continue}g({type:"text",value:l})}do if(a=i.pop(),a.type!=="root"){a.nodes.forEach(C=>{C.nodes||(C.type==="open"&&(C.isOpen=!0),C.type==="close"&&(C.isClose=!0),C.nodes||(C.type="text"),C.invalid=!0)});let y=i[i.length-1],P=y.nodes.indexOf(a);y.nodes.splice(P,1,...a.nodes)}while(i.length>0);return g({type:"eos"}),s};var Ri=Ai;const Hr=Wt,bi=ii,$i=ui,Pi=Ri,X=(t,e={})=>{let r=[];if(Array.isArray(t))for(let n of t){let s=X.create(n,e);Array.isArray(s)?r.push(...s):r.push(s)}else r=[].concat(X.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};X.parse=(t,e={})=>Pi(t,e);X.stringify=(t,e={})=>Hr(typeof t=="string"?X.parse(t,e):t,e);X.compile=(t,e={})=>(typeof t=="string"&&(t=X.parse(t,e)),bi(t,e));X.expand=(t,e={})=>{typeof t=="string"&&(t=X.parse(t,e));let r=$i(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};X.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?X.compile(t,e):X.expand(t,e);var wi=X,Pe={};const Ci=ue,ae="\\\\/",Mr=`[^${ae}]`,le="\\.",Ti="\\+",Oi="\\?",Ye="\\/",xi="(?=.)",dn="[^/]",qt=`(?:${Ye}|$)`,_n=`(?:^|${Ye})`,Vt=`${le}{1,2}${qt}`,Li=`(?!${le})`,ki=`(?!${_n}${Vt})`,Hi=`(?!${le}{0,1}${qt})`,Mi=`(?!${Vt})`,Di=`[^.${Ye}]`,Ni=`${dn}*?`,gn={DOT_LITERAL:le,PLUS_LITERAL:Ti,QMARK_LITERAL:Oi,SLASH_LITERAL:Ye,ONE_CHAR:xi,QMARK:dn,END_ANCHOR:qt,DOTS_SLASH:Vt,NO_DOT:Li,NO_DOTS:ki,NO_DOT_SLASH:Hi,NO_DOTS_SLASH:Mi,QMARK_NO_DOT:Di,STAR:Ni,START_ANCHOR:_n},Ii={...gn,SLASH_LITERAL:`[${ae}]`,QMARK:Mr,STAR:`${Mr}*?`,DOTS_SLASH:`${le}{1,2}(?:[${ae}]|$)`,NO_DOT:`(?!${le})`,NO_DOTS:`(?!(?:^|[${ae}])${le}{1,2}(?:[${ae}]|$))`,NO_DOT_SLASH:`(?!${le}{0,1}(?:[${ae}]|$))`,NO_DOTS_SLASH:`(?!${le}{1,2}(?:[${ae}]|$))`,QMARK_NO_DOT:`[^.${ae}]`,START_ANCHOR:`(?:^|[${ae}])`,END_ANCHOR:`(?:[${ae}]|$)`},Fi={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};var Xe={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Fi,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Ci.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?Ii:gn}};(function(t){const e=ue,r=process.platform==="win32",{REGEX_BACKSLASH:n,REGEX_REMOVE_BACKSLASH:s,REGEX_SPECIAL_CHARS:i,REGEX_SPECIAL_CHARS_GLOBAL:a}=Xe;t.isObject=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t.hasRegexChars=o=>i.test(o),t.isRegexChar=o=>o.length===1&&t.hasRegexChars(o),t.escapeRegex=o=>o.replace(a,"\\$1"),t.toPosixSlashes=o=>o.replace(n,"/"),t.removeBackslashes=o=>o.replace(s,u=>u==="\\"?"":u),t.supportsLookbehinds=()=>{const o=process.version.slice(1).split(".").map(Number);return o.length===3&&o[0]>=9||o[0]===8&&o[1]>=10},t.isWindows=o=>o&&typeof o.windows=="boolean"?o.windows:r===!0||e.sep==="\\",t.escapeLast=(o,u,f)=>{const c=o.lastIndexOf(u,f);return c===-1?o:o[c-1]==="\\"?t.escapeLast(o,u,c-1):`${o.slice(0,c)}\\${o.slice(c)}`},t.removePrefix=(o,u={})=>{let f=o;return f.startsWith("./")&&(f=f.slice(2),u.prefix="./"),f},t.wrapOutput=(o,u={},f={})=>{const c=f.contains?"":"^",_=f.contains?"":"$";let l=`${c}(?:${o})${_}`;return u.negated===!0&&(l=`(?:^(?!${l}).*$)`),l}})(Pe);const Dr=Pe,{CHAR_ASTERISK:dt,CHAR_AT:Bi,CHAR_BACKWARD_SLASH:be,CHAR_COMMA:ji,CHAR_DOT:_t,CHAR_EXCLAMATION_MARK:gt,CHAR_FORWARD_SLASH:yn,CHAR_LEFT_CURLY_BRACE:yt,CHAR_LEFT_PARENTHESES:mt,CHAR_LEFT_SQUARE_BRACKET:Ui,CHAR_PLUS:Gi,CHAR_QUESTION_MARK:Nr,CHAR_RIGHT_CURLY_BRACE:Wi,CHAR_RIGHT_PARENTHESES:Ir,CHAR_RIGHT_SQUARE_BRACKET:qi}=Xe,Fr=t=>t===yn||t===be,Br=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},Vi=(t,e)=>{const r=e||{},n=t.length-1,s=r.parts===!0||r.scanToEnd===!0,i=[],a=[],o=[];let u=t,f=-1,c=0,_=0,l=!1,v=!1,g=!1,y=!1,P=!1,C=!1,F=!1,x=!1,K=!1,R=!1,H=0,b,A,O={value:"",depth:0,isGlob:!1};const G=()=>f>=n,d=()=>u.charCodeAt(f+1),M=()=>(b=A,u.charCodeAt(++f));for(;f<n;){A=M();let q;if(A===be){F=O.backslashes=!0,A=M(),A===yt&&(C=!0);continue}if(C===!0||A===yt){for(H++;G()!==!0&&(A=M());){if(A===be){F=O.backslashes=!0,M();continue}if(A===yt){H++;continue}if(C!==!0&&A===_t&&(A=M())===_t){if(l=O.isBrace=!0,g=O.isGlob=!0,R=!0,s===!0)continue;break}if(C!==!0&&A===ji){if(l=O.isBrace=!0,g=O.isGlob=!0,R=!0,s===!0)continue;break}if(A===Wi&&(H--,H===0)){C=!1,l=O.isBrace=!0,R=!0;break}}if(s===!0)continue;break}if(A===yn){if(i.push(f),a.push(O),O={value:"",depth:0,isGlob:!1},R===!0)continue;if(b===_t&&f===c+1){c+=2;continue}_=f+1;continue}if(r.noext!==!0&&(A===Gi||A===Bi||A===dt||A===Nr||A===gt)===!0&&d()===mt){if(g=O.isGlob=!0,y=O.isExtglob=!0,R=!0,A===gt&&f===c&&(K=!0),s===!0){for(;G()!==!0&&(A=M());){if(A===be){F=O.backslashes=!0,A=M();continue}if(A===Ir){g=O.isGlob=!0,R=!0;break}}continue}break}if(A===dt){if(b===dt&&(P=O.isGlobstar=!0),g=O.isGlob=!0,R=!0,s===!0)continue;break}if(A===Nr){if(g=O.isGlob=!0,R=!0,s===!0)continue;break}if(A===Ui){for(;G()!==!0&&(q=M());){if(q===be){F=O.backslashes=!0,M();continue}if(q===qi){v=O.isBracket=!0,g=O.isGlob=!0,R=!0;break}}if(s===!0)continue;break}if(r.nonegate!==!0&&A===gt&&f===c){x=O.negated=!0,c++;continue}if(r.noparen!==!0&&A===mt){if(g=O.isGlob=!0,s===!0){for(;G()!==!0&&(A=M());){if(A===mt){F=O.backslashes=!0,A=M();continue}if(A===Ir){R=!0;break}}continue}break}if(g===!0){if(R=!0,s===!0)continue;break}}r.noext===!0&&(y=!1,g=!1);let L=u,fe="",p="";c>0&&(fe=u.slice(0,c),u=u.slice(c),_-=c),L&&g===!0&&_>0?(L=u.slice(0,_),p=u.slice(_)):g===!0?(L="",p=u):L=u,L&&L!==""&&L!=="/"&&L!==u&&Fr(L.charCodeAt(L.length-1))&&(L=L.slice(0,-1)),r.unescape===!0&&(p&&(p=Dr.removeBackslashes(p)),L&&F===!0&&(L=Dr.removeBackslashes(L)));const h={prefix:fe,input:t,start:c,base:L,glob:p,isBrace:l,isBracket:v,isGlob:g,isExtglob:y,isGlobstar:P,negated:x,negatedExtglob:K};if(r.tokens===!0&&(h.maxDepth=0,Fr(A)||a.push(O),h.tokens=a),r.parts===!0||r.tokens===!0){let q;for(let T=0;T<i.length;T++){const se=q?q+1:c,ie=i[T],Q=t.slice(se,ie);r.tokens&&(T===0&&c!==0?(a[T].isPrefix=!0,a[T].value=fe):a[T].value=Q,Br(a[T]),h.maxDepth+=a[T].depth),(T!==0||Q!=="")&&o.push(Q),q=ie}if(q&&q+1<t.length){const T=t.slice(q+1);o.push(T),r.tokens&&(a[a.length-1].value=T,Br(a[a.length-1]),h.maxDepth+=a[a.length-1].depth)}h.slashes=i,h.parts=o}return h};var Ki=Vi;const Be=Xe,Y=Pe,{MAX_LENGTH:je,POSIX_REGEX_SOURCE:Qi,REGEX_NON_SPECIAL_CHARS:Yi,REGEX_SPECIAL_CHARS_BACKREF:Xi,REPLACEMENTS:mn}=Be,Zi=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();const r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(s=>Y.escapeRegex(s)).join("..")}return r},me=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,Kt=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=mn[t]||t;const r={...e},n=typeof r.maxLength=="number"?Math.min(je,r.maxLength):je;let s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);const i={type:"bos",value:"",output:r.prepend||""},a=[i],o=r.capture?"":"?:",u=Y.isWindows(e),f=Be.globChars(u),c=Be.extglobChars(f),{DOT_LITERAL:_,PLUS_LITERAL:l,SLASH_LITERAL:v,ONE_CHAR:g,DOTS_SLASH:y,NO_DOT:P,NO_DOT_SLASH:C,NO_DOTS_SLASH:F,QMARK:x,QMARK_NO_DOT:K,STAR:R,START_ANCHOR:H}=f,b=S=>`(${o}(?:(?!${H}${S.dot?y:_}).)*?)`,A=r.dot?"":P,O=r.dot?x:K;let G=r.bash===!0?b(r):R;r.capture&&(G=`(${G})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);const d={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};t=Y.removePrefix(t,d),s=t.length;const M=[],L=[],fe=[];let p=i,h;const q=()=>d.index===s-1,T=d.peek=(S=1)=>t[d.index+S],se=d.advance=()=>t[++d.index]||"",ie=()=>t.slice(d.index+1),Q=(S="",k=0)=>{d.consumed+=S,d.index+=k},Le=S=>{d.output+=S.output!=null?S.output:S.value,Q(S.value)},Zn=()=>{let S=1;for(;T()==="!"&&(T(2)!=="("||T(3)==="?");)se(),d.start++,S++;return S%2===0?!1:(d.negated=!0,d.start++,!0)},ke=S=>{d[S]++,fe.push(S)},de=S=>{d[S]--,fe.pop()},w=S=>{if(p.type==="globstar"){const k=d.braces>0&&(S.type==="comma"||S.type==="brace"),m=S.extglob===!0||M.length&&(S.type==="pipe"||S.type==="paren");S.type!=="slash"&&S.type!=="paren"&&!k&&!m&&(d.output=d.output.slice(0,-p.output.length),p.type="star",p.value="*",p.output=G,d.output+=p.output)}if(M.length&&S.type!=="paren"&&(M[M.length-1].inner+=S.value),(S.value||S.output)&&Le(S),p&&p.type==="text"&&S.type==="text"){p.value+=S.value,p.output=(p.output||"")+S.value;return}S.prev=p,a.push(S),p=S},He=(S,k)=>{const m={...c[k],conditions:1,inner:""};m.prev=p,m.parens=d.parens,m.output=d.output;const $=(r.capture?"(":"")+m.open;ke("parens"),w({type:S,value:k,output:d.output?"":g}),w({type:"paren",extglob:!0,value:se(),output:$}),M.push(m)},zn=S=>{let k=S.close+(r.capture?")":""),m;if(S.type==="negate"){let $=G;if(S.inner&&S.inner.length>1&&S.inner.includes("/")&&($=b(r)),($!==G||q()||/^\)+$/.test(ie()))&&(k=S.close=`)$))${$}`),S.inner.includes("*")&&(m=ie())&&/^\.[^\\/.]+$/.test(m)){const N=Kt(m,{...e,fastpaths:!1}).output;k=S.close=`)${N})${$})`}S.prev.type==="bos"&&(d.negatedExtglob=!0)}w({type:"paren",extglob:!0,value:h,output:k}),de("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let S=!1,k=t.replace(Xi,(m,$,N,V,U,at)=>V==="\\"?(S=!0,m):V==="?"?$?$+V+(U?x.repeat(U.length):""):at===0?O+(U?x.repeat(U.length):""):x.repeat(N.length):V==="."?_.repeat(N.length):V==="*"?$?$+V+(U?G:""):G:$?m:`\\${m}`);return S===!0&&(r.unescape===!0?k=k.replace(/\\/g,""):k=k.replace(/\\+/g,m=>m.length%2===0?"\\\\":m?"\\":"")),k===t&&r.contains===!0?(d.output=t,d):(d.output=Y.wrapOutput(k,d,e),d)}for(;!q();){if(h=se(),h==="\0")continue;if(h==="\\"){const m=T();if(m==="/"&&r.bash!==!0||m==="."||m===";")continue;if(!m){h+="\\",w({type:"text",value:h});continue}const $=/^\\+/.exec(ie());let N=0;if($&&$[0].length>2&&(N=$[0].length,d.index+=N,N%2!==0&&(h+="\\")),r.unescape===!0?h=se():h+=se(),d.brackets===0){w({type:"text",value:h});continue}}if(d.brackets>0&&(h!=="]"||p.value==="["||p.value==="[^")){if(r.posix!==!1&&h===":"){const m=p.value.slice(1);if(m.includes("[")&&(p.posix=!0,m.includes(":"))){const $=p.value.lastIndexOf("["),N=p.value.slice(0,$),V=p.value.slice($+2),U=Qi[V];if(U){p.value=N+U,d.backtrack=!0,se(),!i.output&&a.indexOf(p)===1&&(i.output=g);continue}}}(h==="["&&T()!==":"||h==="-"&&T()==="]")&&(h=`\\${h}`),h==="]"&&(p.value==="["||p.value==="[^")&&(h=`\\${h}`),r.posix===!0&&h==="!"&&p.value==="["&&(h="^"),p.value+=h,Le({value:h});continue}if(d.quotes===1&&h!=='"'){h=Y.escapeRegex(h),p.value+=h,Le({value:h});continue}if(h==='"'){d.quotes=d.quotes===1?0:1,r.keepQuotes===!0&&w({type:"text",value:h});continue}if(h==="("){ke("parens"),w({type:"paren",value:h});continue}if(h===")"){if(d.parens===0&&r.strictBrackets===!0)throw new SyntaxError(me("opening","("));const m=M[M.length-1];if(m&&d.parens===m.parens+1){zn(M.pop());continue}w({type:"paren",value:h,output:d.parens?")":"\\)"}),de("parens");continue}if(h==="["){if(r.nobracket===!0||!ie().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(me("closing","]"));h=`\\${h}`}else ke("brackets");w({type:"bracket",value:h});continue}if(h==="]"){if(r.nobracket===!0||p&&p.type==="bracket"&&p.value.length===1){w({type:"text",value:h,output:`\\${h}`});continue}if(d.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(me("opening","["));w({type:"text",value:h,output:`\\${h}`});continue}de("brackets");const m=p.value.slice(1);if(p.posix!==!0&&m[0]==="^"&&!m.includes("/")&&(h=`/${h}`),p.value+=h,Le({value:h}),r.literalBrackets===!1||Y.hasRegexChars(m))continue;const $=Y.escapeRegex(p.value);if(d.output=d.output.slice(0,-p.value.length),r.literalBrackets===!0){d.output+=$,p.value=$;continue}p.value=`(${o}${$}|${p.value})`,d.output+=p.value;continue}if(h==="{"&&r.nobrace!==!0){ke("braces");const m={type:"brace",value:h,output:"(",outputIndex:d.output.length,tokensIndex:d.tokens.length};L.push(m),w(m);continue}if(h==="}"){const m=L[L.length-1];if(r.nobrace===!0||!m){w({type:"text",value:h,output:h});continue}let $=")";if(m.dots===!0){const N=a.slice(),V=[];for(let U=N.length-1;U>=0&&(a.pop(),N[U].type!=="brace");U--)N[U].type!=="dots"&&V.unshift(N[U].value);$=Zi(V,r),d.backtrack=!0}if(m.comma!==!0&&m.dots!==!0){const N=d.output.slice(0,m.outputIndex),V=d.tokens.slice(m.tokensIndex);m.value=m.output="\\{",h=$="\\}",d.output=N;for(const U of V)d.output+=U.output||U.value}w({type:"brace",value:h,output:$}),de("braces"),L.pop();continue}if(h==="|"){M.length>0&&M[M.length-1].conditions++,w({type:"text",value:h});continue}if(h===","){let m=h;const $=L[L.length-1];$&&fe[fe.length-1]==="braces"&&($.comma=!0,m="|"),w({type:"comma",value:h,output:m});continue}if(h==="/"){if(p.type==="dot"&&d.index===d.start+1){d.start=d.index+1,d.consumed="",d.output="",a.pop(),p=i;continue}w({type:"slash",value:h,output:v});continue}if(h==="."){if(d.braces>0&&p.type==="dot"){p.value==="."&&(p.output=_);const m=L[L.length-1];p.type="dots",p.output+=h,p.value+=h,m.dots=!0;continue}if(d.braces+d.parens===0&&p.type!=="bos"&&p.type!=="slash"){w({type:"text",value:h,output:_});continue}w({type:"dot",value:h,output:_});continue}if(h==="?"){if(!(p&&p.value==="(")&&r.noextglob!==!0&&T()==="("&&T(2)!=="?"){He("qmark",h);continue}if(p&&p.type==="paren"){const $=T();let N=h;if($==="<"&&!Y.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(p.value==="("&&!/[!=<:]/.test($)||$==="<"&&!/<([!=]|\w+>)/.test(ie()))&&(N=`\\${h}`),w({type:"text",value:h,output:N});continue}if(r.dot!==!0&&(p.type==="slash"||p.type==="bos")){w({type:"qmark",value:h,output:K});continue}w({type:"qmark",value:h,output:x});continue}if(h==="!"){if(r.noextglob!==!0&&T()==="("&&(T(2)!=="?"||!/[!=<:]/.test(T(3)))){He("negate",h);continue}if(r.nonegate!==!0&&d.index===0){Zn();continue}}if(h==="+"){if(r.noextglob!==!0&&T()==="("&&T(2)!=="?"){He("plus",h);continue}if(p&&p.value==="("||r.regex===!1){w({type:"plus",value:h,output:l});continue}if(p&&(p.type==="bracket"||p.type==="paren"||p.type==="brace")||d.parens>0){w({type:"plus",value:h});continue}w({type:"plus",value:l});continue}if(h==="@"){if(r.noextglob!==!0&&T()==="("&&T(2)!=="?"){w({type:"at",extglob:!0,value:h,output:""});continue}w({type:"text",value:h});continue}if(h!=="*"){(h==="$"||h==="^")&&(h=`\\${h}`);const m=Yi.exec(ie());m&&(h+=m[0],d.index+=m[0].length),w({type:"text",value:h});continue}if(p&&(p.type==="globstar"||p.star===!0)){p.type="star",p.star=!0,p.value+=h,p.output=G,d.backtrack=!0,d.globstar=!0,Q(h);continue}let S=ie();if(r.noextglob!==!0&&/^\([^?]/.test(S)){He("star",h);continue}if(p.type==="star"){if(r.noglobstar===!0){Q(h);continue}const m=p.prev,$=m.prev,N=m.type==="slash"||m.type==="bos",V=$&&($.type==="star"||$.type==="globstar");if(r.bash===!0&&(!N||S[0]&&S[0]!=="/")){w({type:"star",value:h,output:""});continue}const U=d.braces>0&&(m.type==="comma"||m.type==="brace"),at=M.length&&(m.type==="pipe"||m.type==="paren");if(!N&&m.type!=="paren"&&!U&&!at){w({type:"star",value:h,output:""});continue}for(;S.slice(0,3)==="/**";){const Me=t[d.index+4];if(Me&&Me!=="/")break;S=S.slice(3),Q("/**",3)}if(m.type==="bos"&&q()){p.type="globstar",p.value+=h,p.output=b(r),d.output=p.output,d.globstar=!0,Q(h);continue}if(m.type==="slash"&&m.prev.type!=="bos"&&!V&&q()){d.output=d.output.slice(0,-(m.output+p.output).length),m.output=`(?:${m.output}`,p.type="globstar",p.output=b(r)+(r.strictSlashes?")":"|$)"),p.value+=h,d.globstar=!0,d.output+=m.output+p.output,Q(h);continue}if(m.type==="slash"&&m.prev.type!=="bos"&&S[0]==="/"){const Me=S[1]!==void 0?"|$":"";d.output=d.output.slice(0,-(m.output+p.output).length),m.output=`(?:${m.output}`,p.type="globstar",p.output=`${b(r)}${v}|${v}${Me})`,p.value+=h,d.output+=m.output+p.output,d.globstar=!0,Q(h+se()),w({type:"slash",value:"/",output:""});continue}if(m.type==="bos"&&S[0]==="/"){p.type="globstar",p.value+=h,p.output=`(?:^|${v}|${b(r)}${v})`,d.output=p.output,d.globstar=!0,Q(h+se()),w({type:"slash",value:"/",output:""});continue}d.output=d.output.slice(0,-p.output.length),p.type="globstar",p.output=b(r),p.value+=h,d.output+=p.output,d.globstar=!0,Q(h);continue}const k={type:"star",value:h,output:G};if(r.bash===!0){k.output=".*?",(p.type==="bos"||p.type==="slash")&&(k.output=A+k.output),w(k);continue}if(p&&(p.type==="bracket"||p.type==="paren")&&r.regex===!0){k.output=h,w(k);continue}(d.index===d.start||p.type==="slash"||p.type==="dot")&&(p.type==="dot"?(d.output+=C,p.output+=C):r.dot===!0?(d.output+=F,p.output+=F):(d.output+=A,p.output+=A),T()!=="*"&&(d.output+=g,p.output+=g)),w(k)}for(;d.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(me("closing","]"));d.output=Y.escapeLast(d.output,"["),de("brackets")}for(;d.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(me("closing",")"));d.output=Y.escapeLast(d.output,"("),de("parens")}for(;d.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(me("closing","}"));d.output=Y.escapeLast(d.output,"{"),de("braces")}if(r.strictSlashes!==!0&&(p.type==="star"||p.type==="bracket")&&w({type:"maybe_slash",value:"",output:`${v}?`}),d.backtrack===!0){d.output="";for(const S of d.tokens)d.output+=S.output!=null?S.output:S.value,S.suffix&&(d.output+=S.suffix)}return d};Kt.fastpaths=(t,e)=>{const r={...e},n=typeof r.maxLength=="number"?Math.min(je,r.maxLength):je,s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);t=mn[t]||t;const i=Y.isWindows(e),{DOT_LITERAL:a,SLASH_LITERAL:o,ONE_CHAR:u,DOTS_SLASH:f,NO_DOT:c,NO_DOTS:_,NO_DOTS_SLASH:l,STAR:v,START_ANCHOR:g}=Be.globChars(i),y=r.dot?_:c,P=r.dot?l:c,C=r.capture?"":"?:",F={negated:!1,prefix:""};let x=r.bash===!0?".*?":v;r.capture&&(x=`(${x})`);const K=A=>A.noglobstar===!0?x:`(${C}(?:(?!${g}${A.dot?f:a}).)*?)`,R=A=>{switch(A){case"*":return`${y}${u}${x}`;case".*":return`${a}${u}${x}`;case"*.*":return`${y}${x}${a}${u}${x}`;case"*/*":return`${y}${x}${o}${u}${P}${x}`;case"**":return y+K(r);case"**/*":return`(?:${y}${K(r)}${o})?${P}${u}${x}`;case"**/*.*":return`(?:${y}${K(r)}${o})?${P}${x}${a}${u}${x}`;case"**/.*":return`(?:${y}${K(r)}${o})?${a}${u}${x}`;default:{const O=/^(.*?)\.(\w+)$/.exec(A);if(!O)return;const G=R(O[1]);return G?G+a+O[2]:void 0}}},H=Y.removePrefix(t,F);let b=R(H);return b&&r.strictSlashes!==!0&&(b+=`${o}?`),b};var zi=Kt;const Ji=ue,ea=Ki,Rt=zi,Qt=Pe,ta=Xe,ra=t=>t&&typeof t=="object"&&!Array.isArray(t),B=(t,e,r=!1)=>{if(Array.isArray(t)){const c=t.map(l=>B(l,e,r));return l=>{for(const v of c){const g=v(l);if(g)return g}return!1}}const n=ra(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");const s=e||{},i=Qt.isWindows(e),a=n?B.compileRe(t,e):B.makeRe(t,e,!1,!0),o=a.state;delete a.state;let u=()=>!1;if(s.ignore){const c={...e,ignore:null,onMatch:null,onResult:null};u=B(s.ignore,c,r)}const f=(c,_=!1)=>{const{isMatch:l,match:v,output:g}=B.test(c,a,e,{glob:t,posix:i}),y={glob:t,state:o,regex:a,posix:i,input:c,output:g,match:v,isMatch:l};return typeof s.onResult=="function"&&s.onResult(y),l===!1?(y.isMatch=!1,_?y:!1):u(c)?(typeof s.onIgnore=="function"&&s.onIgnore(y),y.isMatch=!1,_?y:!1):(typeof s.onMatch=="function"&&s.onMatch(y),_?y:!0)};return r&&(f.state=o),f};B.test=(t,e,r,{glob:n,posix:s}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};const i=r||{},a=i.format||(s?Qt.toPosixSlashes:null);let o=t===n,u=o&&a?a(t):t;return o===!1&&(u=a?a(t):t,o=u===n),(o===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?o=B.matchBase(t,e,r,s):o=e.exec(u)),{isMatch:!!o,match:o,output:u}};B.matchBase=(t,e,r,n=Qt.isWindows(r))=>(e instanceof RegExp?e:B.makeRe(e,r)).test(Ji.basename(t));B.isMatch=(t,e,r)=>B(e,r)(t);B.parse=(t,e)=>Array.isArray(t)?t.map(r=>B.parse(r,e)):Rt(t,{...e,fastpaths:!1});B.scan=(t,e)=>ea(t,e);B.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;const s=e||{},i=s.contains?"":"^",a=s.contains?"":"$";let o=`${i}(?:${t.output})${a}`;t&&t.negated===!0&&(o=`^(?!${o}).*$`);const u=B.toRegex(o,e);return n===!0&&(u.state=t),u};B.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(s.output=Rt.fastpaths(t,e)),s.output||(s=Rt(t,e)),B.compileRe(s,e,r,n)};B.toRegex=(t,e)=>{try{const r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};B.constants=ta;var na=B,sa=na;const Sn=rn,vn=wi,ce=sa,bt=Pe,jr=t=>t===""||t==="./",D=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let n=new Set,s=new Set,i=new Set,a=0,o=c=>{i.add(c.output),r&&r.onResult&&r.onResult(c)};for(let c=0;c<e.length;c++){let _=ce(String(e[c]),{...r,onResult:o},!0),l=_.state.negated||_.state.negatedExtglob;l&&a++;for(let v of t){let g=_(v,!0);(l?!g.isMatch:g.isMatch)&&(l?n.add(g.output):(n.delete(g.output),s.add(g.output)))}}let f=(a===e.length?[...i]:[...s]).filter(c=>!n.has(c));if(r&&f.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(c=>c.replace(/\\/g,"")):e}return f};D.match=D;D.matcher=(t,e)=>ce(t,e);D.isMatch=(t,e,r)=>ce(e,r)(t);D.any=D.isMatch;D.not=(t,e,r={})=>{e=[].concat(e).map(String);let n=new Set,s=[],i=o=>{r.onResult&&r.onResult(o),s.push(o.output)},a=new Set(D(t,e,{...r,onResult:i}));for(let o of s)a.has(o)||n.add(o);return[...n]};D.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Sn.inspect(t)}"`);if(Array.isArray(e))return e.some(n=>D.contains(t,n,r));if(typeof e=="string"){if(jr(t)||jr(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return D.isMatch(t,e,{...r,contains:!0})};D.matchKeys=(t,e,r)=>{if(!bt.isObject(t))throw new TypeError("Expected the first argument to be an object");let n=D(Object.keys(t),e,r),s={};for(let i of n)s[i]=t[i];return s};D.some=(t,e,r)=>{let n=[].concat(t);for(let s of[].concat(e)){let i=ce(String(s),r);if(n.some(a=>i(a)))return!0}return!1};D.every=(t,e,r)=>{let n=[].concat(t);for(let s of[].concat(e)){let i=ce(String(s),r);if(!n.every(a=>i(a)))return!1}return!0};D.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Sn.inspect(t)}"`);return[].concat(e).every(n=>ce(n,r)(t))};D.capture=(t,e,r)=>{let n=bt.isWindows(r),i=ce.makeRe(String(t),{...r,capture:!0}).exec(n?bt.toPosixSlashes(e):e);if(i)return i.slice(1).map(a=>a===void 0?"":a)};D.makeRe=(...t)=>ce.makeRe(...t);D.scan=(...t)=>ce.scan(...t);D.parse=(t,e)=>{let r=[];for(let n of[].concat(t||[]))for(let s of vn(String(n),e))r.push(ce.parse(s,e));return r};D.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!/\{.*\}/.test(t)?[t]:vn(t,e)};D.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return D.braces(t,{...e,expand:!0})};var ia=D;Object.defineProperty(E,"__esModule",{value:!0});E.removeDuplicateSlashes=E.matchAny=E.convertPatternsToRe=E.makeRe=E.getPatternParts=E.expandBraceExpansion=E.expandPatternsWithBraceExpansion=E.isAffectDepthOfReadingPattern=E.endsWithSlashGlobStar=E.hasGlobStar=E.getBaseDirectory=E.isPatternRelatedToParentDirectory=E.getPatternsOutsideCurrentDirectory=E.getPatternsInsideCurrentDirectory=E.getPositivePatterns=E.getNegativePatterns=E.isPositivePattern=E.isNegativePattern=E.convertToNegativePattern=E.convertToPositivePattern=E.isDynamicPattern=E.isStaticPattern=void 0;const aa=ue,oa=Fs,Yt=ia,En="**",ua="\\",ca=/[*?]|^!/,la=/\[[^[]*]/,fa=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,pa=/[!*+?@]\([^(]*\)/,ha=/,|\.\./,da=/(?!^)\/{2,}/g;function An(t,e={}){return!Rn(t,e)}E.isStaticPattern=An;function Rn(t,e={}){return t===""?!1:!!(e.caseSensitiveMatch===!1||t.includes(ua)||ca.test(t)||la.test(t)||fa.test(t)||e.extglob!==!1&&pa.test(t)||e.braceExpansion!==!1&&_a(t))}E.isDynamicPattern=Rn;function _a(t){const e=t.indexOf("{");if(e===-1)return!1;const r=t.indexOf("}",e+1);if(r===-1)return!1;const n=t.slice(e,r);return ha.test(n)}function ga(t){return Ze(t)?t.slice(1):t}E.convertToPositivePattern=ga;function ya(t){return"!"+t}E.convertToNegativePattern=ya;function Ze(t){return t.startsWith("!")&&t[1]!=="("}E.isNegativePattern=Ze;function bn(t){return!Ze(t)}E.isPositivePattern=bn;function ma(t){return t.filter(Ze)}E.getNegativePatterns=ma;function Sa(t){return t.filter(bn)}E.getPositivePatterns=Sa;function va(t){return t.filter(e=>!Xt(e))}E.getPatternsInsideCurrentDirectory=va;function Ea(t){return t.filter(Xt)}E.getPatternsOutsideCurrentDirectory=Ea;function Xt(t){return t.startsWith("..")||t.startsWith("./..")}E.isPatternRelatedToParentDirectory=Xt;function Aa(t){return oa(t,{flipBackslashes:!1})}E.getBaseDirectory=Aa;function Ra(t){return t.includes(En)}E.hasGlobStar=Ra;function $n(t){return t.endsWith("/"+En)}E.endsWithSlashGlobStar=$n;function ba(t){const e=aa.basename(t);return $n(t)||An(e)}E.isAffectDepthOfReadingPattern=ba;function $a(t){return t.reduce((e,r)=>e.concat(Pn(r)),[])}E.expandPatternsWithBraceExpansion=$a;function Pn(t){const e=Yt.braces(t,{expand:!0,nodupes:!0,keepEscaping:!0});return e.sort((r,n)=>r.length-n.length),e.filter(r=>r!=="")}E.expandBraceExpansion=Pn;function Pa(t,e){let{parts:r}=Yt.scan(t,Object.assign(Object.assign({},e),{parts:!0}));return r.length===0&&(r=[t]),r[0].startsWith("/")&&(r[0]=r[0].slice(1),r.unshift("")),r}E.getPatternParts=Pa;function wn(t,e){return Yt.makeRe(t,e)}E.makeRe=wn;function wa(t,e){return t.map(r=>wn(r,e))}E.convertPatternsToRe=wa;function Ca(t,e){return e.some(r=>r.test(t))}E.matchAny=Ca;function Ta(t){return t.replace(da,"/")}E.removeDuplicateSlashes=Ta;var ze={};const Oa=qe,Cn=Oa.PassThrough,xa=Array.prototype.slice;var La=ka;function ka(){const t=[],e=xa.call(arguments);let r=!1,n=e[e.length-1];n&&!Array.isArray(n)&&n.pipe==null?e.pop():n={};const s=n.end!==!1,i=n.pipeError===!0;n.objectMode==null&&(n.objectMode=!0),n.highWaterMark==null&&(n.highWaterMark=64*1024);const a=Cn(n);function o(){for(let c=0,_=arguments.length;c<_;c++)t.push(Tn(arguments[c],n));return u(),this}function u(){if(r)return;r=!0;let c=t.shift();if(!c){process.nextTick(f);return}Array.isArray(c)||(c=[c]);let _=c.length+1;function l(){--_>0||(r=!1,u())}function v(g){function y(){g.removeListener("merge2UnpipeEnd",y),g.removeListener("end",y),i&&g.removeListener("error",P),l()}function P(C){a.emit("error",C)}if(g._readableState.endEmitted)return l();g.on("merge2UnpipeEnd",y),g.on("end",y),i&&g.on("error",P),g.pipe(a,{end:!1}),g.resume()}for(let g=0;g<c.length;g++)v(c[g]);l()}function f(){r=!1,a.emit("queueDrain"),s&&a.end()}return a.setMaxListeners(0),a.add=o,a.on("unpipe",function(c){c.emit("merge2UnpipeEnd")}),e.length&&o.apply(null,e),a}function Tn(t,e){if(Array.isArray(t))for(let r=0,n=t.length;r<n;r++)t[r]=Tn(t[r],e);else{if(!t._readableState&&t.pipe&&(t=t.pipe(Cn(e))),!t._readableState||!t.pause||!t.pipe)throw new Error("Only readable stream can be merged.");t.pause()}return t}Object.defineProperty(ze,"__esModule",{value:!0});ze.merge=void 0;const Ha=La;function Ma(t){const e=Ha(t);return t.forEach(r=>{r.once("error",n=>e.emit("error",n))}),e.once("close",()=>Ur(t)),e.once("end",()=>Ur(t)),e}ze.merge=Ma;function Ur(t){t.forEach(e=>e.emit("close"))}var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.isEmpty=Ae.isString=void 0;function Da(t){return typeof t=="string"}Ae.isString=Da;function Na(t){return t===""}Ae.isEmpty=Na;Object.defineProperty(I,"__esModule",{value:!0});I.string=I.stream=I.pattern=I.path=I.fs=I.errno=I.array=void 0;const Ia=Ee;I.array=Ia;const Fa=Ve;I.errno=Fa;const Ba=Ke;I.fs=Ba;const ja=j;I.path=ja;const Ua=E;I.pattern=Ua;const Ga=ze;I.stream=Ga;const Wa=Ae;I.string=Wa;Object.defineProperty(W,"__esModule",{value:!0});W.convertPatternGroupToTask=W.convertPatternGroupsToTasks=W.groupPatternsByBaseDirectory=W.getNegativePatternsAsPositive=W.getPositivePatterns=W.convertPatternsToTasks=W.generate=void 0;const ne=I;function qa(t,e){const r=Gr(t,e),n=Gr(e.ignore,e),s=On(r),i=xn(r,n),a=s.filter(c=>ne.pattern.isStaticPattern(c,e)),o=s.filter(c=>ne.pattern.isDynamicPattern(c,e)),u=$t(a,i,!1),f=$t(o,i,!0);return u.concat(f)}W.generate=qa;function Gr(t,e){let r=t;return e.braceExpansion&&(r=ne.pattern.expandPatternsWithBraceExpansion(r)),e.baseNameMatch&&(r=r.map(n=>n.includes("/")?n:`**/${n}`)),r.map(n=>ne.pattern.removeDuplicateSlashes(n))}function $t(t,e,r){const n=[],s=ne.pattern.getPatternsOutsideCurrentDirectory(t),i=ne.pattern.getPatternsInsideCurrentDirectory(t),a=Pt(s),o=Pt(i);return n.push(...wt(a,e,r)),"."in o?n.push(Zt(".",i,e,r)):n.push(...wt(o,e,r)),n}W.convertPatternsToTasks=$t;function On(t){return ne.pattern.getPositivePatterns(t)}W.getPositivePatterns=On;function xn(t,e){return ne.pattern.getNegativePatterns(t).concat(e).map(ne.pattern.convertToPositivePattern)}W.getNegativePatternsAsPositive=xn;function Pt(t){const e={};return t.reduce((r,n)=>{const s=ne.pattern.getBaseDirectory(n);return s in r?r[s].push(n):r[s]=[n],r},e)}W.groupPatternsByBaseDirectory=Pt;function wt(t,e,r){return Object.keys(t).map(n=>Zt(n,t[n],e,r))}W.convertPatternGroupsToTasks=wt;function Zt(t,e,r,n){return{dynamic:n,positive:e,negative:r,base:t,patterns:[].concat(e,r.map(ne.pattern.convertToNegativePattern))}}W.convertPatternGroupToTask=Zt;var zt={},Jt={},ee={},er={},Je={},oe={},pe={},Z={},et={};Object.defineProperty(et,"__esModule",{value:!0});et.read=void 0;function Va(t,e,r){e.fs.lstat(t,(n,s)=>{if(n!==null){Wr(r,n);return}if(!s.isSymbolicLink()||!e.followSymbolicLink){St(r,s);return}e.fs.stat(t,(i,a)=>{if(i!==null){if(e.throwErrorOnBrokenSymbolicLink){Wr(r,i);return}St(r,s);return}e.markSymbolicLink&&(a.isSymbolicLink=()=>!0),St(r,a)})})}et.read=Va;function Wr(t,e){t(e)}function St(t,e){t(null,e)}var tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.read=void 0;function Ka(t,e){const r=e.fs.lstatSync(t);if(!r.isSymbolicLink()||!e.followSymbolicLink)return r;try{const n=e.fs.statSync(t);return e.markSymbolicLink&&(n.isSymbolicLink=()=>!0),n}catch(n){if(!e.throwErrorOnBrokenSymbolicLink)return r;throw n}}tt.read=Ka;var tr={},Ln={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createFileSystemAdapter=t.FILE_SYSTEM_ADAPTER=void 0;const e=It;t.FILE_SYSTEM_ADAPTER={lstat:e.lstat,stat:e.stat,lstatSync:e.lstatSync,statSync:e.statSync};function r(n){return n===void 0?t.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},t.FILE_SYSTEM_ADAPTER),n)}t.createFileSystemAdapter=r})(Ln);Object.defineProperty(tr,"__esModule",{value:!0});const Qa=Ln;let Ya=class{constructor(e={}){this._options=e,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=Qa.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(e,r){return e??r}};tr.default=Ya;Object.defineProperty(Z,"__esModule",{value:!0});Z.statSync=Z.stat=Z.Settings=void 0;const qr=et,Xa=tt,Ct=tr;Z.Settings=Ct.default;function Za(t,e,r){if(typeof e=="function"){qr.read(t,Tt(),e);return}qr.read(t,Tt(e),r)}Z.stat=Za;function za(t,e){const r=Tt(e);return Xa.read(t,r)}Z.statSync=za;function Tt(t={}){return t instanceof Ct.default?t:new Ct.default(t)}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Vr;var Ja=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ls):t=>(Vr||(Vr=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));/*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var eo=ro;const to=Ja;function ro(t,e){let r,n,s,i=!0;Array.isArray(t)?(r=[],n=t.length):(s=Object.keys(t),r={},n=s.length);function a(u){function f(){e&&e(u,r),e=null}i?to(f):f()}function o(u,f,c){r[u]=c,(--n===0||f)&&a(f)}n?s?s.forEach(function(u){t[u](function(f,c){o(u,f,c)})}):t.forEach(function(u,f){u(function(c,_){o(f,c,_)})}):a(null),i=!1}var we={};Object.defineProperty(we,"__esModule",{value:!0});we.IS_SUPPORT_READDIR_WITH_FILE_TYPES=void 0;const Ue=process.versions.node.split(".");if(Ue[0]===void 0||Ue[1]===void 0)throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);const kn=Number.parseInt(Ue[0],10),no=Number.parseInt(Ue[1],10),Hn=10,so=10,io=kn>Hn,ao=kn===Hn&&no>=so;we.IS_SUPPORT_READDIR_WITH_FILE_TYPES=io||ao;var Ce={},rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.createDirentFromStats=void 0;class oo{constructor(e,r){this.name=e,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}}function uo(t,e){return new oo(t,e)}rt.createDirentFromStats=uo;Object.defineProperty(Ce,"__esModule",{value:!0});Ce.fs=void 0;const co=rt;Ce.fs=co;var Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.joinPathSegments=void 0;function lo(t,e,r){return t.endsWith(r)?t+e:t+r+e}Te.joinPathSegments=lo;Object.defineProperty(pe,"__esModule",{value:!0});pe.readdir=pe.readdirWithFileTypes=pe.read=void 0;const fo=Z,Mn=eo,po=we,Dn=Ce,Nn=Te;function ho(t,e,r){if(!e.stats&&po.IS_SUPPORT_READDIR_WITH_FILE_TYPES){In(t,e,r);return}Fn(t,e,r)}pe.read=ho;function In(t,e,r){e.fs.readdir(t,{withFileTypes:!0},(n,s)=>{if(n!==null){Ge(r,n);return}const i=s.map(o=>({dirent:o,name:o.name,path:Nn.joinPathSegments(t,o.name,e.pathSegmentSeparator)}));if(!e.followSymbolicLinks){Ot(r,i);return}const a=i.map(o=>_o(o,e));Mn(a,(o,u)=>{if(o!==null){Ge(r,o);return}Ot(r,u)})})}pe.readdirWithFileTypes=In;function _o(t,e){return r=>{if(!t.dirent.isSymbolicLink()){r(null,t);return}e.fs.stat(t.path,(n,s)=>{if(n!==null){if(e.throwErrorOnBrokenSymbolicLink){r(n);return}r(null,t);return}t.dirent=Dn.fs.createDirentFromStats(t.name,s),r(null,t)})}}function Fn(t,e,r){e.fs.readdir(t,(n,s)=>{if(n!==null){Ge(r,n);return}const i=s.map(a=>{const o=Nn.joinPathSegments(t,a,e.pathSegmentSeparator);return u=>{fo.stat(o,e.fsStatSettings,(f,c)=>{if(f!==null){u(f);return}const _={name:a,path:o,dirent:Dn.fs.createDirentFromStats(a,c)};e.stats&&(_.stats=c),u(null,_)})}});Mn(i,(a,o)=>{if(a!==null){Ge(r,a);return}Ot(r,o)})})}pe.readdir=Fn;function Ge(t,e){t(e)}function Ot(t,e){t(null,e)}var he={};Object.defineProperty(he,"__esModule",{value:!0});he.readdir=he.readdirWithFileTypes=he.read=void 0;const go=Z,yo=we,Bn=Ce,jn=Te;function mo(t,e){return!e.stats&&yo.IS_SUPPORT_READDIR_WITH_FILE_TYPES?Un(t,e):Gn(t,e)}he.read=mo;function Un(t,e){return e.fs.readdirSync(t,{withFileTypes:!0}).map(n=>{const s={dirent:n,name:n.name,path:jn.joinPathSegments(t,n.name,e.pathSegmentSeparator)};if(s.dirent.isSymbolicLink()&&e.followSymbolicLinks)try{const i=e.fs.statSync(s.path);s.dirent=Bn.fs.createDirentFromStats(s.name,i)}catch(i){if(e.throwErrorOnBrokenSymbolicLink)throw i}return s})}he.readdirWithFileTypes=Un;function Gn(t,e){return e.fs.readdirSync(t).map(n=>{const s=jn.joinPathSegments(t,n,e.pathSegmentSeparator),i=go.statSync(s,e.fsStatSettings),a={name:n,path:s,dirent:Bn.fs.createDirentFromStats(n,i)};return e.stats&&(a.stats=i),a})}he.readdir=Gn;var rr={},Wn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createFileSystemAdapter=t.FILE_SYSTEM_ADAPTER=void 0;const e=It;t.FILE_SYSTEM_ADAPTER={lstat:e.lstat,stat:e.stat,lstatSync:e.lstatSync,statSync:e.statSync,readdir:e.readdir,readdirSync:e.readdirSync};function r(n){return n===void 0?t.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},t.FILE_SYSTEM_ADAPTER),n)}t.createFileSystemAdapter=r})(Wn);Object.defineProperty(rr,"__esModule",{value:!0});const So=ue,vo=Z,Eo=Wn;let Ao=class{constructor(e={}){this._options=e,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=Eo.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,So.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new vo.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(e,r){return e??r}};rr.default=Ao;Object.defineProperty(oe,"__esModule",{value:!0});oe.Settings=oe.scandirSync=oe.scandir=void 0;const Kr=pe,Ro=he,xt=rr;oe.Settings=xt.default;function bo(t,e,r){if(typeof e=="function"){Kr.read(t,Lt(),e);return}Kr.read(t,Lt(e),r)}oe.scandir=bo;function $o(t,e){const r=Lt(e);return Ro.read(t,r)}oe.scandirSync=$o;function Lt(t={}){return t instanceof xt.default?t:new xt.default(t)}var nr={exports:{}};function Po(t){var e=new t,r=e;function n(){var i=e;return i.next?e=i.next:(e=new t,r=e),i.next=null,i}function s(i){r.next=i,r=i}return{get:n,release:s}}var wo=Po,Co=wo;function qn(t,e,r){if(typeof t=="function"&&(r=e,e=t,t=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=Co(To),s=null,i=null,a=0,o=null,u={push:y,drain:J,saturated:J,pause:c,paused:!1,get concurrency(){return r},set concurrency(R){if(!(R>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=R,!u.paused)for(;s&&a<r;)a++,C()},running:f,resume:v,idle:g,length:_,getQueue:l,unshift:P,empty:J,kill:F,killAndDrain:x,error:K};return u;function f(){return a}function c(){u.paused=!0}function _(){for(var R=s,H=0;R;)R=R.next,H++;return H}function l(){for(var R=s,H=[];R;)H.push(R.value),R=R.next;return H}function v(){if(u.paused){if(u.paused=!1,s===null){a++,C();return}for(;s&&a<r;)a++,C()}}function g(){return a===0&&u.length()===0}function y(R,H){var b=n.get();b.context=t,b.release=C,b.value=R,b.callback=H||J,b.errorHandler=o,a>=r||u.paused?i?(i.next=b,i=b):(s=b,i=b,u.saturated()):(a++,e.call(t,b.value,b.worked))}function P(R,H){var b=n.get();b.context=t,b.release=C,b.value=R,b.callback=H||J,b.errorHandler=o,a>=r||u.paused?s?(b.next=s,s=b):(s=b,i=b,u.saturated()):(a++,e.call(t,b.value,b.worked))}function C(R){R&&n.release(R);var H=s;H&&a<=r?u.paused?a--:(i===s&&(i=null),s=H.next,H.next=null,e.call(t,H.value,H.worked),i===null&&u.empty()):--a===0&&u.drain()}function F(){s=null,i=null,u.drain=J}function x(){s=null,i=null,u.drain(),u.drain=J}function K(R){o=R}}function J(){}function To(){this.value=null,this.callback=J,this.next=null,this.release=J,this.context=null,this.errorHandler=null;var t=this;this.worked=function(r,n){var s=t.callback,i=t.errorHandler,a=t.value;t.value=null,t.callback=J,t.errorHandler&&i(r,a),s.call(t.context,r,n),t.release(t)}}function Oo(t,e,r){typeof t=="function"&&(r=e,e=t,t=null);function n(c,_){e.call(this,c).then(function(l){_(null,l)},_)}var s=qn(t,n,r),i=s.push,a=s.unshift;return s.push=o,s.unshift=u,s.drained=f,s;function o(c){var _=new Promise(function(l,v){i(c,function(g,y){if(g){v(g);return}l(y)})});return _.catch(J),_}function u(c){var _=new Promise(function(l,v){a(c,function(g,y){if(g){v(g);return}l(y)})});return _.catch(J),_}function f(){if(s.idle())return new Promise(function(l){l()});var c=s.drain,_=new Promise(function(l){s.drain=function(){c(),l()}});return _}}nr.exports=qn;nr.exports.promise=Oo;var xo=nr.exports,te={};Object.defineProperty(te,"__esModule",{value:!0});te.joinPathSegments=te.replacePathSegmentSeparator=te.isAppliedFilter=te.isFatalError=void 0;function Lo(t,e){return t.errorFilter===null?!0:!t.errorFilter(e)}te.isFatalError=Lo;function ko(t,e){return t===null||t(e)}te.isAppliedFilter=ko;function Ho(t,e){return t.split(/[/\\]/).join(e)}te.replacePathSegmentSeparator=Ho;function Mo(t,e,r){return t===""?e:t.endsWith(r)?t+e:t+r+e}te.joinPathSegments=Mo;var nt={};Object.defineProperty(nt,"__esModule",{value:!0});const Do=te;let No=class{constructor(e,r){this._root=e,this._settings=r,this._root=Do.replacePathSegmentSeparator(e,r.pathSegmentSeparator)}};nt.default=No;Object.defineProperty(Je,"__esModule",{value:!0});const Io=rs,Fo=oe,Bo=xo,De=te,jo=nt;class Uo extends jo.default{constructor(e,r){super(e,r),this._settings=r,this._scandir=Fo.scandir,this._emitter=new Io.EventEmitter,this._queue=Bo(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate(()=>{this._pushToQueue(this._root,this._settings.basePath)}),this._emitter}get isDestroyed(){return this._isDestroyed}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(e){this._emitter.on("entry",e)}onError(e){this._emitter.once("error",e)}onEnd(e){this._emitter.once("end",e)}_pushToQueue(e,r){const n={directory:e,base:r};this._queue.push(n,s=>{s!==null&&this._handleError(s)})}_worker(e,r){this._scandir(e.directory,this._settings.fsScandirSettings,(n,s)=>{if(n!==null){r(n,void 0);return}for(const i of s)this._handleEntry(i,e.base);r(null,void 0)})}_handleError(e){this._isDestroyed||!De.isFatalError(this._settings,e)||(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",e))}_handleEntry(e,r){if(this._isDestroyed||this._isFatalError)return;const n=e.path;r!==void 0&&(e.path=De.joinPathSegments(r,e.name,this._settings.pathSegmentSeparator)),De.isAppliedFilter(this._settings.entryFilter,e)&&this._emitEntry(e),e.dirent.isDirectory()&&De.isAppliedFilter(this._settings.deepFilter,e)&&this._pushToQueue(n,r===void 0?void 0:e.path)}_emitEntry(e){this._emitter.emit("entry",e)}}Je.default=Uo;Object.defineProperty(er,"__esModule",{value:!0});const Go=Je;class Wo{constructor(e,r){this._root=e,this._settings=r,this._reader=new Go.default(this._root,this._settings),this._storage=[]}read(e){this._reader.onError(r=>{qo(e,r)}),this._reader.onEntry(r=>{this._storage.push(r)}),this._reader.onEnd(()=>{Vo(e,this._storage)}),this._reader.read()}}er.default=Wo;function qo(t,e){t(e)}function Vo(t,e){t(null,e)}var sr={};Object.defineProperty(sr,"__esModule",{value:!0});const Ko=qe,Qo=Je;class Yo{constructor(e,r){this._root=e,this._settings=r,this._reader=new Qo.default(this._root,this._settings),this._stream=new Ko.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError(e=>{this._stream.emit("error",e)}),this._reader.onEntry(e=>{this._stream.push(e)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}}sr.default=Yo;var ir={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});const Xo=oe,Ne=te,Zo=nt;class zo extends Zo.default{constructor(){super(...arguments),this._scandir=Xo.scandirSync,this._storage=[],this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),this._storage}_pushToQueue(e,r){this._queue.add({directory:e,base:r})}_handleQueue(){for(const e of this._queue.values())this._handleDirectory(e.directory,e.base)}_handleDirectory(e,r){try{const n=this._scandir(e,this._settings.fsScandirSettings);for(const s of n)this._handleEntry(s,r)}catch(n){this._handleError(n)}}_handleError(e){if(Ne.isFatalError(this._settings,e))throw e}_handleEntry(e,r){const n=e.path;r!==void 0&&(e.path=Ne.joinPathSegments(r,e.name,this._settings.pathSegmentSeparator)),Ne.isAppliedFilter(this._settings.entryFilter,e)&&this._pushToStorage(e),e.dirent.isDirectory()&&Ne.isAppliedFilter(this._settings.deepFilter,e)&&this._pushToQueue(n,r===void 0?void 0:e.path)}_pushToStorage(e){this._storage.push(e)}}ar.default=zo;Object.defineProperty(ir,"__esModule",{value:!0});const Jo=ar;class eu{constructor(e,r){this._root=e,this._settings=r,this._reader=new Jo.default(this._root,this._settings)}read(){return this._reader.read()}}ir.default=eu;var or={};Object.defineProperty(or,"__esModule",{value:!0});const tu=ue,ru=oe;class nu{constructor(e={}){this._options=e,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,Number.POSITIVE_INFINITY),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,tu.sep),this.fsScandirSettings=new ru.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(e,r){return e??r}}or.default=nu;Object.defineProperty(ee,"__esModule",{value:!0});ee.Settings=ee.walkStream=ee.walkSync=ee.walk=void 0;const Qr=er,su=sr,iu=ir,kt=or;ee.Settings=kt.default;function au(t,e,r){if(typeof e=="function"){new Qr.default(t,We()).read(e);return}new Qr.default(t,We(e)).read(r)}ee.walk=au;function ou(t,e){const r=We(e);return new iu.default(t,r).read()}ee.walkSync=ou;function uu(t,e){const r=We(e);return new su.default(t,r).read()}ee.walkStream=uu;function We(t={}){return t instanceof kt.default?t:new kt.default(t)}var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});const cu=ue,lu=Z,Yr=I;class fu{constructor(e){this._settings=e,this._fsStatSettings=new lu.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(e){return cu.resolve(this._settings.cwd,e)}_makeEntry(e,r){const n={name:r,path:r,dirent:Yr.fs.createDirentFromStats(r,e)};return this._settings.stats&&(n.stats=e),n}_isFatalError(e){return!Yr.errno.isEnoentCodeError(e)&&!this._settings.suppressErrors}}Oe.default=fu;var st={};Object.defineProperty(st,"__esModule",{value:!0});const pu=qe,hu=Z,du=ee,_u=Oe;class gu extends _u.default{constructor(){super(...arguments),this._walkStream=du.walkStream,this._stat=hu.stat}dynamic(e,r){return this._walkStream(e,r)}static(e,r){const n=e.map(this._getFullEntryPath,this),s=new pu.PassThrough({objectMode:!0});s._write=(i,a,o)=>this._getEntry(n[i],e[i],r).then(u=>{u!==null&&r.entryFilter(u)&&s.push(u),i===n.length-1&&s.end(),o()}).catch(o);for(let i=0;i<n.length;i++)s.write(i);return s}_getEntry(e,r,n){return this._getStat(e).then(s=>this._makeEntry(s,r)).catch(s=>{if(n.errorFilter(s))return null;throw s})}_getStat(e){return new Promise((r,n)=>{this._stat(e,this._fsStatSettings,(s,i)=>s===null?r(i):n(s))})}}st.default=gu;Object.defineProperty(Jt,"__esModule",{value:!0});const yu=ee,mu=Oe,Su=st;class vu extends mu.default{constructor(){super(...arguments),this._walkAsync=yu.walk,this._readerStream=new Su.default(this._settings)}dynamic(e,r){return new Promise((n,s)=>{this._walkAsync(e,r,(i,a)=>{i===null?n(a):s(i)})})}async static(e,r){const n=[],s=this._readerStream.static(e,r);return new Promise((i,a)=>{s.once("error",a),s.on("data",o=>n.push(o)),s.once("end",()=>i(n))})}}Jt.default=vu;var xe={},ur={},cr={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});const Re=I;class Eu{constructor(e,r,n){this._patterns=e,this._settings=r,this._micromatchOptions=n,this._storage=[],this._fillStorage()}_fillStorage(){for(const e of this._patterns){const r=this._getPatternSegments(e),n=this._splitSegmentsIntoSections(r);this._storage.push({complete:n.length<=1,pattern:e,segments:r,sections:n})}}_getPatternSegments(e){return Re.pattern.getPatternParts(e,this._micromatchOptions).map(n=>Re.pattern.isDynamicPattern(n,this._settings)?{dynamic:!0,pattern:n,patternRe:Re.pattern.makeRe(n,this._micromatchOptions)}:{dynamic:!1,pattern:n})}_splitSegmentsIntoSections(e){return Re.array.splitWhen(e,r=>r.dynamic&&Re.pattern.hasGlobStar(r.pattern))}}lr.default=Eu;Object.defineProperty(cr,"__esModule",{value:!0});const Au=lr;class Ru extends Au.default{match(e){const r=e.split("/"),n=r.length,s=this._storage.filter(i=>!i.complete||i.segments.length>n);for(const i of s){const a=i.sections[0];if(!i.complete&&n>a.length||r.every((u,f)=>{const c=i.segments[f];return!!(c.dynamic&&c.patternRe.test(u)||!c.dynamic&&c.pattern===u)}))return!0}return!1}}cr.default=Ru;Object.defineProperty(ur,"__esModule",{value:!0});const Ie=I,bu=cr;class $u{constructor(e,r){this._settings=e,this._micromatchOptions=r}getFilter(e,r,n){const s=this._getMatcher(r),i=this._getNegativePatternsRe(n);return a=>this._filter(e,a,s,i)}_getMatcher(e){return new bu.default(e,this._settings,this._micromatchOptions)}_getNegativePatternsRe(e){const r=e.filter(Ie.pattern.isAffectDepthOfReadingPattern);return Ie.pattern.convertPatternsToRe(r,this._micromatchOptions)}_filter(e,r,n,s){if(this._isSkippedByDeep(e,r.path)||this._isSkippedSymbolicLink(r))return!1;const i=Ie.path.removeLeadingDotSegment(r.path);return this._isSkippedByPositivePatterns(i,n)?!1:this._isSkippedByNegativePatterns(i,s)}_isSkippedByDeep(e,r){return this._settings.deep===1/0?!1:this._getEntryLevel(e,r)>=this._settings.deep}_getEntryLevel(e,r){const n=r.split("/").length;if(e==="")return n;const s=e.split("/").length;return n-s}_isSkippedSymbolicLink(e){return!this._settings.followSymbolicLinks&&e.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(e,r){return!this._settings.baseNameMatch&&!r.match(e)}_isSkippedByNegativePatterns(e,r){return!Ie.pattern.matchAny(e,r)}}ur.default=$u;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});const _e=I;class Pu{constructor(e,r){this._settings=e,this._micromatchOptions=r,this.index=new Map}getFilter(e,r){const n=_e.pattern.convertPatternsToRe(e,this._micromatchOptions),s=_e.pattern.convertPatternsToRe(r,Object.assign(Object.assign({},this._micromatchOptions),{dot:!0}));return i=>this._filter(i,n,s)}_filter(e,r,n){const s=_e.path.removeLeadingDotSegment(e.path);if(this._settings.unique&&this._isDuplicateEntry(s)||this._onlyFileFilter(e)||this._onlyDirectoryFilter(e)||this._isSkippedByAbsoluteNegativePatterns(s,n))return!1;const i=e.dirent.isDirectory(),a=this._isMatchToPatterns(s,r,i)&&!this._isMatchToPatterns(s,n,i);return this._settings.unique&&a&&this._createIndexRecord(s),a}_isDuplicateEntry(e){return this.index.has(e)}_createIndexRecord(e){this.index.set(e,void 0)}_onlyFileFilter(e){return this._settings.onlyFiles&&!e.dirent.isFile()}_onlyDirectoryFilter(e){return this._settings.onlyDirectories&&!e.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(e,r){if(!this._settings.absolute)return!1;const n=_e.path.makeAbsolute(this._settings.cwd,e);return _e.pattern.matchAny(n,r)}_isMatchToPatterns(e,r,n){const s=_e.pattern.matchAny(e,r);return!s&&n?_e.pattern.matchAny(e+"/",r):s}}fr.default=Pu;var pr={};Object.defineProperty(pr,"__esModule",{value:!0});const wu=I;class Cu{constructor(e){this._settings=e}getFilter(){return e=>this._isNonFatalError(e)}_isNonFatalError(e){return wu.errno.isEnoentCodeError(e)||this._settings.suppressErrors}}pr.default=Cu;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});const Xr=I;class Tu{constructor(e){this._settings=e}getTransformer(){return e=>this._transform(e)}_transform(e){let r=e.path;return this._settings.absolute&&(r=Xr.path.makeAbsolute(this._settings.cwd,r),r=Xr.path.unixify(r)),this._settings.markDirectories&&e.dirent.isDirectory()&&(r+="/"),this._settings.objectMode?Object.assign(Object.assign({},e),{path:r}):r}}hr.default=Tu;Object.defineProperty(xe,"__esModule",{value:!0});const Ou=ue,xu=ur,Lu=fr,ku=pr,Hu=hr;class Mu{constructor(e){this._settings=e,this.errorFilter=new ku.default(this._settings),this.entryFilter=new Lu.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new xu.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new Hu.default(this._settings)}_getRootDirectory(e){return Ou.resolve(this._settings.cwd,e.base)}_getReaderOptions(e){const r=e.base==="."?"":e.base;return{basePath:r,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(r,e.positive,e.negative),entryFilter:this.entryFilter.getFilter(e.positive,e.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}}xe.default=Mu;Object.defineProperty(zt,"__esModule",{value:!0});const Du=Jt,Nu=xe;class Iu extends Nu.default{constructor(){super(...arguments),this._reader=new Du.default(this._settings)}async read(e){const r=this._getRootDirectory(e),n=this._getReaderOptions(e);return(await this.api(r,e,n)).map(i=>n.transform(i))}api(e,r,n){return r.dynamic?this._reader.dynamic(e,n):this._reader.static(r.patterns,n)}}zt.default=Iu;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});const Fu=qe,Bu=st,ju=xe;class Uu extends ju.default{constructor(){super(...arguments),this._reader=new Bu.default(this._settings)}read(e){const r=this._getRootDirectory(e),n=this._getReaderOptions(e),s=this.api(r,e,n),i=new Fu.Readable({objectMode:!0,read:()=>{}});return s.once("error",a=>i.emit("error",a)).on("data",a=>i.emit("data",n.transform(a))).once("end",()=>i.emit("end")),i.once("close",()=>s.destroy()),i}api(e,r,n){return r.dynamic?this._reader.dynamic(e,n):this._reader.static(r.patterns,n)}}dr.default=Uu;var _r={},gr={};Object.defineProperty(gr,"__esModule",{value:!0});const Gu=Z,Wu=ee,qu=Oe;class Vu extends qu.default{constructor(){super(...arguments),this._walkSync=Wu.walkSync,this._statSync=Gu.statSync}dynamic(e,r){return this._walkSync(e,r)}static(e,r){const n=[];for(const s of e){const i=this._getFullEntryPath(s),a=this._getEntry(i,s,r);a===null||!r.entryFilter(a)||n.push(a)}return n}_getEntry(e,r,n){try{const s=this._getStat(e);return this._makeEntry(s,r)}catch(s){if(n.errorFilter(s))return null;throw s}}_getStat(e){return this._statSync(e,this._fsStatSettings)}}gr.default=Vu;Object.defineProperty(_r,"__esModule",{value:!0});const Ku=gr,Qu=xe;class Yu extends Qu.default{constructor(){super(...arguments),this._reader=new Ku.default(this._settings)}read(e){const r=this._getRootDirectory(e),n=this._getReaderOptions(e);return this.api(r,e,n).map(n.transform)}api(e,r,n){return r.dynamic?this._reader.dynamic(e,n):this._reader.static(r.patterns,n)}}_r.default=Yu;var Vn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;const e=It,n=Math.max(Nt.cpus().length,1);t.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:e.lstat,lstatSync:e.lstatSync,stat:e.stat,statSync:e.statSync,readdir:e.readdir,readdirSync:e.readdirSync};class s{constructor(a={}){this._options=a,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,n),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0),this.ignore=[].concat(this.ignore)}_getValue(a,o){return a===void 0?o:a}_getFileSystemMethods(a={}){return Object.assign(Object.assign({},t.DEFAULT_FILE_SYSTEM_ADAPTER),a)}}t.default=s})(Vn);const Kn=W,Xu=zt,Zu=dr,zu=_r,Ht=Vn,z=I;async function Mt(t,e){re(t);const r=Dt(t,Xu.default,e),n=await Promise.all(r);return z.array.flatten(n)}(function(t){t.glob=t,t.globSync=e,t.globStream=r,t.async=t;function e(o,u){re(o);const f=Dt(o,zu.default,u);return z.array.flatten(f)}t.sync=e;function r(o,u){re(o);const f=Dt(o,Zu.default,u);return z.stream.merge(f)}t.stream=r;function n(o,u){re(o);const f=[].concat(o),c=new Ht.default(u);return Kn.generate(f,c)}t.generateTasks=n;function s(o,u){re(o);const f=new Ht.default(u);return z.pattern.isDynamicPattern(o,f)}t.isDynamicPattern=s;function i(o){return re(o),z.path.escape(o)}t.escapePath=i;function a(o){return re(o),z.path.convertPathToPattern(o)}t.convertPathToPattern=a,function(o){function u(c){return re(c),z.path.escapePosixPath(c)}o.escapePath=u;function f(c){return re(c),z.path.convertPosixPathToPattern(c)}o.convertPathToPattern=f}(t.posix||(t.posix={})),function(o){function u(c){return re(c),z.path.escapeWindowsPath(c)}o.escapePath=u;function f(c){return re(c),z.path.convertWindowsPathToPattern(c)}o.convertPathToPattern=f}(t.win32||(t.win32={}))})(Mt||(Mt={}));function Dt(t,e,r){const n=[].concat(t),s=new Ht.default(r),i=Kn.generate(n,s),a=new e(s);return i.map(a.read,a)}function re(t){if(![].concat(t).every(n=>z.string.isString(n)&&!z.string.isEmpty(n)))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}var Ju=Mt;const ec=fs(Ju);async function tc(t){const e=await ec.glob([...t],{dot:!0});return Promise.all(e.map(async r=>{try{return{content:await es(r,"utf8"),path:r}}catch(n){throw ve(n),new Error(`Failed to read ${r}: ${n.message}.`)}}))}async function rc(t){await Promise.all(t.map(async({path:e,content:r})=>{try{await ts(e,r,"utf8")}catch(n){throw ve(n),new Error(`Failed to write changes to ${e}: ${n.message}.`)}}))}function nc(){return new Date().toISOString().slice(0,10)}const sc=/[-.](?<increment>\d+)$/;function Zr(t){const e=Yn.exec(t);if(e===null||e.groups===void 0)throw new Error(`Expected a semantic version string, but got '${t}'.`);const{major:r,minor:n,patch:s,prerelease:i,build:a}=e.groups,o=i!==void 0?sc.exec(i):null,u=o!==null&&o.groups!==void 0?o.groups.increment:null;return{major:Number.parseInt(r),minor:Number.parseInt(n),patch:Number.parseInt(s),prerelease:{label:i!==void 0?u!==null?i.slice(0,-u.length-1):i:"",delimiter:i!==void 0&&u!==null?i.slice(-u.length-1,-u.length):"",increment:u!==null?Number.parseInt(u):null},build:a??""}}function ic(t,e){const r=Zr(t),n=Zr(e);return n.major===r.major+1&&ac(n)||n.major===r.major&&oc(r,n)}function ac(t){return t.minor===0&&Qn(t)}function oc(t,e){return e.minor===t.minor+1&&Qn(e)||e.minor===t.minor&&uc(t,e)}function Qn(t){return t.patch===0&&yr(t)}function uc(t,e){return e.patch===t.patch+1&&!cc(t)&&yr(e)||e.patch===t.patch&&lc(t,e)}function cc(t){return t.prerelease.label!==""||t.build!==""}function yr(t){return t.prerelease.increment===null||t.prerelease.increment===0}function lc(t,e){return t.prerelease.label===""?e.prerelease.label===""&&vt(t,e):e.prerelease.label!==t.prerelease.label?yr(e):t.prerelease.increment===null?e.prerelease.increment===0||e.prerelease.increment===null&&vt(t,e):e.prerelease.increment===null||e.prerelease.delimiter===t.prerelease.delimiter&&(e.prerelease.increment===t.prerelease.increment+1||e.prerelease.increment===t.prerelease.increment&&vt(t,e))}function vt(t,e){return t.build!==""&&e.build!==t.build}const Yn=/(?<fullVersion>(?<major>0|[1-9]\d*)\.(?<minor>0|[1-9]\d*)\.(?<patch>0|[1-9]\d*)(?<prerelease>-(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*)?(?<build>\+[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*)?)/;function it(t){var r;const e=Yn.exec(t);return((r=e==null?void 0:e.groups)==null?void 0:r.fullVersion)??null}function Xn(t){return t.includes("-")||t.includes("+")}function mr(t,e){if(e.length!==0){if(e.includes(t))throw new Error(`already contains release version ${t}`);if(!ic(e[0],t))throw new Error(`has latest release version ${e[0]}, but was set to update to ${t}`)}}const zr=/\n== ((?<unreleasedRepositoryLink>\S+)\[unreleased\]|unreleased)(?<unreleasedBody>.*?)(?=\n== \S+\[(?<latestReleaseVersion>\S+)\]|\n*$)/isu,fc=/\/(?:compare|releases\/tag)\/v\S+/iu,pc=/\n*$/u;async function hc(t,e){var l,v,g,y;const r=zr.exec(t);if(r===null)throw new Error("must have an 'Unreleased' section");const n=((v=(l=r.groups)==null?void 0:l.unreleasedBody)==null?void 0:v.trim())??null;if(n===null||n==="")throw new Error("must have at least one item in the 'Unreleased' section");const s=((g=r.groups)==null?void 0:g.unreleasedRepositoryLink)??null;if(s===null)throw new Error("must have a link to the GitHub repository in the 'Unreleased' section");if(e.checks.includes("sequential")){const P=/\[(\d+\.\d+\.\d+.*)\] - \d{4}-\d{2}-\d{2}\n/giu,C=Array.from(t.matchAll(P),F=>it(F[1])).filter(Ft);mr(e.version,C)}const i=((y=r.groups)==null?void 0:y.latestReleaseVersion)??null,a=s.replace(fc,""),o=`${a}/compare/v${e.version}\\...HEAD`,u=`${a}${i!==null?`/compare/v${i}\\...v${e.version}`:`/releases/tag/v${e.version}`}`,f=`== ${o}[Unreleased]`,c=`== ${u}[${e.version}] - ${e.date}`,_=`
${f}

${c}
${n}
`;return t.replace(zr,_).replace(/\n\n\n+/gu,`

`).replace(/\n+(?====? )/gu,`

`).replace(new RegExp("(?<=\\n== .+)\\n+(?=\\n=== )","gu"),"").replace(pc,`
`)}const Jr=/\n## (?:\[unreleased\](?:\((?<unreleasedRepositoryLink>\S+)\))?|unreleased)(?<unreleasedBody>.*?)(?=\n## \[(?<latestReleaseVersion>\S+)\]|\n*$)/isu,en=/\n\[unreleased\]: (?<unreleasedRepositoryLink>\S+)(?=\n+\[\S+\]: |\n*$)/iu,dc=/\/(?:compare|releases\/tag)\/v\S+/iu,_c=/\n*$/u;async function gc(t,e){var g,y,P,C,F;const r=Jr.exec(t);if(r===null)throw new Error("must have an 'Unreleased' section");const n=((y=(g=r.groups)==null?void 0:g.unreleasedBody)==null?void 0:y.trim())??null;if(n===null||n==="")throw new Error("must have at least one item in the 'Unreleased' section");const s=en.exec(t),i=((P=s==null?void 0:s.groups)==null?void 0:P.unreleasedRepositoryLink)??((C=r.groups)==null?void 0:C.unreleasedRepositoryLink)??null;if(i===null)throw new Error("must have a link to the GitHub repository in the 'Unreleased' section");if(e.checks.includes("sequential")){const x=/\n## \[(\d+\.\d+\.\d+.*)\]\(/giu,K=Array.from(t.matchAll(x),R=>it(R[1])).filter(Ft);mr(e.version,K)}const a=((F=r.groups)==null?void 0:F.latestReleaseVersion)??null,o=i.replace(dc,""),u=`${o}/compare/v${e.version}...HEAD`,f=`${o}${a!==null?`/compare/v${a}...v${e.version}`:`/releases/tag/v${e.version}`}`,c=s!==null?"## [Unreleased]":`## [Unreleased](${u})`,_=s!==null?`## [${e.version}] - ${e.date}`:`## [${e.version}](${f}) - ${e.date}`,l=`
${c}

${_}
${n}
`,v=s!==null?`
[unreleased]: ${u}
[${e.version}]: ${f}`:"";return t.replace(Jr,l).replace(en,v).replace(/\n\n\n+/gu,`

`).replace(/\n+(?=###? )/gu,`

`).replace(new RegExp("(?<=\\n## .+)\\n+(?=\\n### )","gu"),"").replace(/\n+(?=\[\S+\]: )/gu,`

`).replace(new RegExp("(?<=\\[\\S+\\]: .+)\\n+(?=\\[\\S+\\]: )","gu"),`
`).replace(_c,`
`)}const tn=/"version":(?<whitespace>\s*)"(?<version>[^"]+)"/u,yc=/\n*$/u;async function mc(t,e){const r=tn.exec(t);if(r===null||r.groups===void 0)throw new Error("must have a 'version' field");const{version:n,whitespace:s}=r.groups;if(e.checks.includes("sequential")){const i=it(n);i!==null&&mr(e.version,[i])}return t.replace(tn,`"version":${s}"${e.version}"`).replace(yc,`
`)}function Sc(t){return t.status==="fulfilled"}function vc(t){return t.status==="rejected"}const Ec={"asciidoc-changelog":hc,"markdown-changelog":gc,"package-json":mc};async function Ac(t,e){if(t.length===0)return cs(`No files set to be updated in release version ${e.version}, as it is ${Xn(e.version)?"a prerelease":"not a prerelease"}.`),0;try{const r=await tc(t);if(r.length===0)return Et(`${t.join(", ")} did not match any files.`),0;const n={...e,date:nc()},s=await Promise.allSettled(r.map(o)),i=s.filter(vc).map(({reason:u})=>(ve(u),u.message));if(i.length>0){for(const u of i)At(u);return 1}const a=s.filter(Sc).map(({value:u})=>u);return await rc(a),0;async function o(u){try{const f=u.content,c=Rc(u.path),_=Ec[c],l=await _(f,n);return{...u,content:l}}catch(f){throw ve(f),new Error(`${u.path} ${f.message}.`)}}}catch(r){return ve(r),At(r.message),1}}function Rc(t){const e=t.split("/"),r=e.at(-1)??"";switch(r){case"CHANGELOG.adoc":return"asciidoc-changelog";case"CHANGELOG.md":return"markdown-changelog";case"package.json":return"package-json"}if(r.endsWith(".adoc")){const n=[...e.slice(0,-1),"CHANGELOG.adoc"].join("/");return Et(`${t} is not a supported filename and must be renamed to ${n} in Updraft v2.0.0.`),"asciidoc-changelog"}if(r.endsWith(".md")){const n=[...e.slice(0,-1),"CHANGELOG.md"].join("/");return Et(`${t} is not a supported filename and must be renamed to ${n} in Updraft v2.0.0.`),"markdown-changelog"}throw new Error("is not a supported file format")}function bc(t,e){var s;const r={};let n=null;for(const i of e)i.startsWith("-")?(n=i,r[n]=r[n]??[]):n!==null&&((s=r[n])==null||s.push(i));return $c(t,r),Pc(t,r),wc(t,r),Cc(t,r),Tc(t,r),r}function $c(t,e){for(const r of Object.keys(e))if(!(r in t))throw new Error(`Unknown option '${r}'.`)}function Pc(t,e){const r=Object.entries(t);for(const[n,{required:s}]of r)if(s&&!(n in e))throw new Error(`${n} is required.`)}function wc(t,e){const r=Object.entries(t);for(const[n,{args:s}]of r){const i=e[n];if(i===void 0)continue;const a=s.min??null,o=s.max??null,u=i.length;if(a!==null&&a===o&&u!==a){const f=`${a} ${Bt(a,"argument")}`;throw new Error(`${n} requires ${f}, but got ${u}.`)}}}function Cc(t,e){const r=Object.entries(t);for(const[n,{args:s}]of r){const i=e[n];if(i===void 0)continue;const a=s.min??null,o=i.length;if(a!==null&&o<a){const u=`at least ${a} ${Bt(a,"argument")}`;throw new Error(`${n} requires ${u}, but got ${o}.`)}}}function Tc(t,e){const r=Object.entries(t);for(const[n,{args:s}]of r){const i=e[n];if(i===void 0)continue;const a=s.max??null,o=i.length;if(a!==null&&o>a){const u=`at most ${a} ${Bt(a,"argument")}`;throw new Error(`${n} requires ${u}, but got ${o}.`)}}}async function Oc(t,e=""){var l;const r={"--check-sequential-release":{args:{min:0,max:0}},"--files":{args:{min:1}},"--prerelease-files":{args:{min:1}},"--release-files":{args:{min:1}},"--release-version":{required:!0,args:{min:1,max:1}}};let n;try{n=bc(r,t)}catch(v){return ve(v),ut(v.message,e)}const s=n["--check-sequential-release"]!==void 0,i=n["--files"]??[],a=n["--prerelease-files"]??[],o=n["--release-files"]??[],u=((l=n["--release-version"])==null?void 0:l[0])??"";if(i.length+a.length+o.length===0)return ut("--files, --release-files, or --prerelease-files is required.",e);const f=it(u);if(f===null)return ut(`--release-version has an invalid value '${u}'.`,e);const c=Xn(f)?[...i,...a]:[...i,...o],_=[s?"sequential":null].filter(Ft);return Ac(c,{checks:_,version:f})}Oc(os()).then(Jn.exit);
